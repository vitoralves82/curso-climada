--- START OF FILE climada_quiz1_updated.html ---

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Módulo 1 | Curso CLIMADA</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">
    <style>
        :root {
            --primary: #1a73e8; /* Azul Google */
            --primary-dark: #0d47a1;
            --secondary: #4caf50; /* Verde */
            --dark: #2c3e50; /* Azul escuro/cinza */
            --light: #f8f9fa; /* Fundo claro */
            --danger: #e74c3c; /* Vermelho */
            --success: #2ecc71; /* Verde claro */
            --warning: #f39c12; /* Amarelo */
            --border-color: #e0e0e0; /* Cinza claro borda */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.6;
            background-color: var(--light); /* Fundo geral */
        }

        .btn {
            transition: all 0.3s ease;
            border-radius: 6px; /* Bordas arredondadas */
            padding: 0.6rem 1.2rem; /* Padding */
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .navbar {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* Sombra mais suave */
            height: 64px; /* Altura fixa */
        }
        .nav-link {
            position: relative;
            padding-bottom: 4px; /* Espaço para a linha */
            color: #555; /* Cor mais suave */
            font-size: 0.95rem;
        }

        .nav-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-link:hover:after, .nav-link.active:after {
            width: 100%;
        }
        .nav-link.active { font-weight: 600; color: var(--primary); } /* Estilo link ativo */


        .quiz-option {
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid var(--border-color);
            padding: 0.8rem 1rem; /* Padding ajustado */
            border-radius: 8px; /* Mais arredondado */
            background-color: white;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background-color: rgba(26, 115, 232, 0.03); /* Hover mais sutil */
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background-color: rgba(26, 115, 232, 0.08);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2); /* Outline sutil */
        }

        .quiz-option.correct {
            border-color: var(--success);
            background-color: rgba(46, 204, 113, 0.08);
        }

        .quiz-option.incorrect {
            border-color: var(--danger);
            background-color: rgba(231, 76, 60, 0.08);
        }

        /* Estilo para o texto da opção */
        .quiz-option span {
            color: #444;
        }
        .quiz-option .font-medium {
            color: #222;
        }
         .quiz-option.selected .font-medium {
             color: var(--primary-dark);
         }
         .quiz-option.correct .font-medium {
             color: #1E8449; /* Verde escuro */
         }
         .quiz-option.incorrect .font-medium {
              color: #A93226; /* Vermelho escuro */
         }


        /* Indicador de progresso */
        .progress-indicator .step {
            width: 32px; /* Um pouco maior */
            height: 32px;
            border-radius: 50%;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #6b7280;
            transition: all 0.3s ease;
            border: 2px solid transparent; /* Borda para estado ativo */
             font-size: 0.9rem;
        }

        .progress-indicator .step.active {
            background-color: white;
            color: var(--primary);
            border-color: var(--primary); /* Borda ativa */
        }

        .progress-indicator .step.completed {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        /* Ícone check quando completo */
        .progress-indicator .step.completed::before {
             content: '\f00c'; /* FontAwesome check icon */
             font-family: 'Font Awesome 5 Free';
             font-weight: 900;
             font-size: 0.8rem;
         }
        .progress-indicator .step.completed span { display: none; } /* Esconde número quando completo */


        .progress-indicator .step-connector {
            height: 3px; /* Linha mais grossa */
            background-color: #e5e7eb;
            flex-grow: 1;
            transition: background-color 0.3s ease; /* Apenas cor */
             margin: 0 -2px; /* Sobrepor um pouco os círculos */
        }

        .progress-indicator .step-connector.completed {
            background-color: var(--success);
        }

        .feedback-box {
            border-left: 4px solid;
            padding: 1rem; /* Mais padding */
             border-radius: 0 6px 6px 0; /* Canto arredondado */
             font-size: 0.9rem;
        }

        .feedback-box.correct {
            border-color: var(--success);
            background-color: #f0fff4; /* Fundo verde muito claro */
        }
        .feedback-box.correct h4 { color: #2F855A; } /* Título verde */

        .feedback-box.incorrect {
            border-color: var(--danger);
            background-color: #fff5f5; /* Fundo vermelho muito claro */
        }
        .feedback-box.incorrect h4 { color: #C53030; } /* Título vermelho */


        .result-card {
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); /* Sombra mais suave */
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .result-card:hover {
            transform: translateY(-4px); /* Elevação menor */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08); /* Sombra mais definida */
        }
         /* Focus style */
         .btn:focus, a:focus, input:focus {
             outline: 2px solid var(--primary);
             outline-offset: 2px;
             box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.3);
         }
         .quiz-option:focus {
             outline: none; /* Remover outline padrão */
             border-color: var(--primary);
             box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.3);
         }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navbar -->
    <nav class="bg-white shadow-md sticky top-0 z-50 navbar">
        <div class="container mx-auto px-4 py-3 h-full flex items-center justify-between">
             <div class="flex items-center">
                <a href="dashboard.html" class="flex items-center"> <!-- Corrigido link -->
                    <i class="fas fa-chart-line text-blue-600 text-2xl mr-2"></i>
                    <span class="font-bold text-xl text-gray-800">CLIMADA</span>
                </a>
                <span class="mx-2 text-gray-400 hidden sm:inline">|</span>
                <span class="text-sm text-gray-600 hidden sm:inline">Precificação de Riscos Climáticos</span>
            </div>

            <div class="hidden md:flex items-center space-x-6">
                 <a href="dashboard.html" class="nav-link">Início</a> <!-- Corrigido link -->
                <a href="climada_module1_updated.html" class="nav-link active">Módulos</a> <!-- Corrigido link & Ativo -->
                <a href="climada_practice1_updated.html" class="nav-link">Práticas</a> <!-- Corrigido link -->
                <a href="climada_resources_updated.html" class="nav-link">Recursos</a> <!-- Corrigido link -->
                <!-- <a href="community.html" class="nav-link">Comunidade</a> -->
            </div>

            <div class="flex items-center">
                 <!-- Busca pode ser adicionada aqui -->
                 <button class="md:hidden focus:outline-none text-gray-700">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
     <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-8 shadow-inner">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold mb-2">Quiz - Módulo 1</h1>
                    <p class="text-blue-100 text-opacity-90">Teste seu conhecimento: Fundamentos e Introdução ao CLIMADA</p>
                </div>
                 <a href="climada_module1_updated.html" class="bg-white text-blue-700 hover:bg-blue-50 py-2 px-5 rounded-lg shadow-md flex items-center btn mt-4 md:mt-0 text-sm font-medium"> <!-- Corrigido link -->
                    <i class="fas fa-arrow-left mr-2"></i>
                    Voltar ao Módulo 1
                </a>
            </div>
        </div>
    </header>

    <!-- Introduction Section -->
    <section id="intro-section" aria-labelledby="intro-heading" class="container mx-auto px-4 py-8">
         <div class="bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-200">
            <h2 id="intro-heading" class="text-2xl font-semibold mb-4 text-gray-800">Sobre este Quiz</h2>
            <p class="mb-4 text-gray-700">Avalie sua compreensão dos conceitos do Módulo 1: riscos climáticos, arquitetura CLIMADA e configuração do ambiente.</p>

            <div class="grid md:grid-cols-3 gap-6 mt-6">
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-bullseye text-blue-500 mr-2"></i>
                        <h3 class="font-semibold text-blue-800">Propósito</h3>
                    </div>
                    <p class="text-gray-700 text-sm">Verificar conceitos-chave e identificar áreas para revisão.</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg border border-green-100">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-link text-green-500 mr-2"></i>
                        <h3 class="font-semibold text-green-800">Relevância</h3>
                    </div>
                    <p class="text-gray-700 text-sm">Questões baseadas diretamente no conteúdo das 3 unidades do Módulo 1.</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-100">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-forward text-purple-500 mr-2"></i>
                        <h3 class="font-semibold text-purple-800">Próximos Passos</h3>
                    </div>
                    <p class="text-gray-700 text-sm">Receba feedback e recomendações personalizadas ao final.</p>
                </div>
            </div>

            <div class="mt-6 pt-6 border-t border-gray-200">
                <div class="flex items-center text-sm text-gray-600">
                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                    <p>10 questões de múltipla escolha. Feedback imediato por questão e análise final.</p>
                </div>
            </div>

            <button id="start-quiz" class="mt-8 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg shadow-md font-semibold flex items-center justify-center w-full md:w-auto btn text-base">
                <i class="fas fa-play-circle mr-2"></i>
                Iniciar o Quiz
            </button>
        </div>
    </section>

    <!-- Quiz Section -->
     <section id="quiz-container" aria-labelledby="quiz-heading" class="container mx-auto px-4 py-6 hidden">
        <!-- Progress Indicator -->
         <div class="bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-200">
            <div class="mb-4">
                <div class="flex justify-between items-center mb-3">
                     <h3 id="quiz-heading" class="text-lg font-semibold text-gray-800">Progresso do Quiz</h3>
                    <span id="question-counter" class="text-sm font-medium bg-blue-100 text-blue-800 py-1 px-3 rounded-full">Questão 1/10</span>
                </div>
                <div class="progress-indicator flex items-center">
                     <div class="step active" data-step="1"><span>1</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="2"><span>2</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="3"><span>3</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="4"><span>4</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="5"><span>5</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="6"><span>6</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="7"><span>7</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="8"><span>8</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="9"><span>9</span></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="10"><span>10</span></div>
                </div>
            </div>
        </div>

        <!-- Question Display -->
         <div class="bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-200">
            <h2 id="question-title" class="text-xl font-semibold mb-4 text-gray-800">Questão 1</h2>
            <p id="question-text" class="mb-6 text-gray-700 text-base">O que constitui o risco climático, segundo a abordagem apresentada no curso?</p>

            <div id="options-container" class="space-y-3">
                <!-- Options dynamically inserted -->
            </div>

            <div id="feedback-container" class="mt-6 hidden" aria-live="polite"> <!-- ARIA live region -->
                <div id="feedback-box" class="feedback-box">
                    <h4 id="feedback-title" class="font-semibold mb-2 text-base"></h4>
                    <p id="feedback-text"></p>
                </div>
            </div>

            <div class="mt-8 flex flex-wrap justify-between items-center gap-4">
                 <button id="prev-button" class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium flex items-center btn text-sm hidden">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Anterior
                </button>
                 <!-- Spacer to push next/check button to the right -->
                 <div class="flex-grow"></div>

                 <button id="check-answer" class="bg-green-600 hover:bg-green-700 text-white py-2 px-5 rounded-lg font-medium flex items-center btn text-sm">
                    Verificar Resposta
                    <i class="fas fa-check ml-2"></i>
                </button>
                <button id="next-button" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-5 rounded-lg font-medium flex items-center btn text-sm hidden">
                    Próxima Questão
                    <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Quiz Results Section -->
     <section id="results-container" aria-labelledby="results-heading" class="container mx-auto px-4 py-8 hidden">
         <div class="bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-200">
            <div class="text-center mb-8">
                 <div class="inline-block p-5 bg-gradient-to-br from-blue-100 to-green-100 rounded-full mb-4 shadow-sm">
                    <i id="result-icon" class="fas fa-award text-5xl text-blue-600"></i>
                </div>
                <h2 id="results-heading" class="text-3xl font-bold mb-2 text-gray-800">Quiz Concluído!</h2>
                <p class="text-gray-600">Veja seu desempenho no Módulo 1.</p>
            </div>

            <div class="flex justify-center mb-8">
                <div class="w-52 h-52 relative"> <!-- Tamanho ajustado -->
                    <canvas id="score-chart"></canvas>
                    <div class="absolute inset-0 flex items-center justify-center flex-col text-center">
                        <span id="score-value" class="text-4xl font-bold text-blue-700">0</span>
                        <span class="text-gray-500 text-xs font-medium mt-1">de 10 corretas</span>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700 text-center">Desempenho por Tópico</h3>
                 <div class="grid md:grid-cols-3 gap-4 max-w-4xl mx-auto">
                     <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-center">
                        <h4 class="font-medium mb-2 text-gray-700 text-sm">Conceitos Risco Climático</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
                            <div id="score-concepts" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <span id="text-concepts" class="text-xs text-gray-600">0/4 (0%)</span>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-center">
                        <h4 class="font-medium mb-2 text-gray-700 text-sm">Plataforma CLIMADA</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
                            <div id="score-platform" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                         <span id="text-platform" class="text-xs text-gray-600">0/3 (0%)</span>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-center">
                        <h4 class="font-medium mb-2 text-gray-700 text-sm">Ambiente de Trabalho</h4>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
                            <div id="score-setup" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                         <span id="text-setup" class="text-xs text-gray-600">0/3 (0%)</span>
                    </div>
                </div>
            </div>

            <div id="feedback-summary" class="mb-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700 text-center">Feedback Personalizado</h3>
                <div id="feedback-message" class="p-4 bg-blue-50 rounded-lg text-gray-700 border border-blue-100 max-w-3xl mx-auto text-sm"></div>
            </div>

            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700 text-center">Próximos Passos Recomendados</h3>
                <div class="grid md:grid-cols-3 gap-6 max-w-5xl mx-auto">
                    <div class="result-card bg-white p-5 text-center">
                        <div class="flex justify-center mb-3">
                             <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                                <i class="fas fa-book text-xl text-blue-600"></i>
                            </div>
                        </div>
                        <h4 class="font-semibold text-gray-800 mb-2">Revisar Conceitos</h4>
                        <p class="text-xs text-gray-600 mb-4">Volte ao Módulo 1 para reforçar os tópicos onde teve mais dificuldade.</p>
                        <a href="climada_module1_updated.html" class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center justify-center"> <!-- Corrigido link -->
                            Revisar Módulo 1 <i class="fas fa-arrow-right ml-1 text-xs"></i>
                        </a>
                    </div>
                     <div class="result-card bg-white p-5 text-center">
                         <div class="flex justify-center mb-3">
                            <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                                <i class="fas fa-laptop-code text-xl text-green-600"></i>
                            </div>
                         </div>
                        <h4 class="font-semibold text-gray-800 mb-2">Prática Hands-on</h4>
                        <p class="text-xs text-gray-600 mb-4">Aplique o conhecimento na Prática 1, instalando e usando o CLIMADA.</p>
                        <a href="climada_practice1_updated.html" class="text-green-600 hover:text-green-800 text-sm font-medium flex items-center justify-center"> <!-- Corrigido link -->
                            Ir para Prática 1 <i class="fas fa-arrow-right ml-1 text-xs"></i>
                        </a>
                    </div>
                     <div class="result-card bg-white p-5 text-center">
                         <div class="flex justify-center mb-3">
                             <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
                                <i class="fas fa-layer-group text-xl text-purple-600"></i>
                            </div>
                         </div>
                        <h4 class="font-semibold text-gray-800 mb-2">Aprofundar</h4>
                        <p class="text-xs text-gray-600 mb-4">Explore os Recursos Complementares para expandir seu conhecimento.</p>
                        <a href="climada_resources_updated.html" class="text-purple-600 hover:text-purple-800 text-sm font-medium flex items-center justify-center"> <!-- Corrigido link -->
                            Ver Recursos <i class="fas fa-arrow-right ml-1 text-xs"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="flex flex-wrap justify-center gap-4 mt-10">
                <a href="climada_module1_updated.html" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-lg shadow-md font-medium flex items-center btn text-sm"> <!-- Corrigido link -->
                    <i class="fas fa-redo-alt mr-2"></i>
                    Refazer Quiz (ou Revisar Módulo)
                </a>
                 <a href="dashboard.html" class="bg-gray-500 hover:bg-gray-600 text-white py-2 px-6 rounded-lg shadow-md font-medium flex items-center btn text-sm"> <!-- Corrigido link -->
                    <i class="fas fa-home mr-2"></i>
                    Voltar à Homepage
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-10 mt-12">
        <div class="container mx-auto px-4">
             <div class="grid md:grid-cols-4 gap-8">
                 <div>
                     <h3 class="text-xl font-semibold mb-4 flex items-center"><i class="fas fa-chart-line mr-2"></i>CLIMADA</h3>
                     <p class="text-gray-400 text-sm">Curso de Precificação de Riscos Climáticos.</p>
                     <!-- Social links can go here -->
                 </div>
                 <div>
                     <h4 class="text-lg font-semibold mb-4">Navegação</h4>
                     <ul class="space-y-2">
                         <li><a href="dashboard.html" class="text-gray-400 hover:text-white text-sm">Início</a></li> <!-- Corrigido link -->
                         <li><a href="climada_module1_updated.html" class="text-gray-400 hover:text-white text-sm">Módulos</a></li> <!-- Corrigido link -->
                         <li><a href="climada_practice1_updated.html" class="text-gray-400 hover:text-white text-sm">Práticas</a></li> <!-- Corrigido link -->
                         <li><a href="climada_resources_updated.html" class="text-gray-400 hover:text-white text-sm">Recursos</a></li> <!-- Corrigido link -->
                     </ul>
                 </div>
                 <div>
                     <h4 class="text-lg font-semibold mb-4">Recursos</h4>
                     <ul class="space-y-2">
                         <li><a href="https://climada-python.readthedocs.io/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white text-sm">Doc Oficial</a></li>
                         <li><a href="https://github.com/CLIMADA-project/climada_python" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white text-sm">GitHub</a></li>
                         <li><a href="#" class="text-gray-400 hover:text-white text-sm">FAQ</a></li>
                     </ul>
                 </div>
                 <div>
                     <h4 class="text-lg font-semibold mb-4">Contato</h4>
                     <ul class="space-y-2">
                         <li><a href="#" class="text-gray-400 hover:text-white text-sm">Comunidade</a></li>
                         <li><a href="#" class="text-gray-400 hover:text-white text-sm">Feedback</a></li>
                     </ul>
                 </div>
             </div>
             <div class="border-t border-gray-700 mt-8 pt-6 text-center">
                 <p class="text-gray-400 text-xs">© 2024 Curso CLIMADA.</p>
             </div>
         </div>
     </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script>
        // Quiz questions data (same as provided)
         const quizQuestions = [ { id: 1, title: "Questão 1", text: "O que constitui o risco climático, segundo a abordagem apresentada no curso?", options: [ { id: "a", text: "Apenas os impactos físicos de eventos climáticos extremos" }, { id: "b", text: "A interação entre perigo climático, exposição e vulnerabilidade", correct: true }, { id: "c", text: "Somente os danos financeiros causados por mudanças climáticas" }, { id: "d", text: "Apenas os riscos de transição para uma economia de baixo carbono" } ], feedback: { correct: "Correto! O risco climático é composto pela interação entre três elementos principais: o perigo climático (hazard), a exposição de ativos ou pessoas, e a vulnerabilidade desses elementos expostos.", incorrect: "Incorreto. O risco climático é definido como a interação entre perigo climático, exposição e vulnerabilidade. Esta é uma definição fundamental na análise de risco climático." }, category: "concepts" }, { id: 2, title: "Questão 2", text: "Qual a diferença entre riscos físicos e riscos de transição?", options: [ { id: "a", text: "Riscos físicos afetam estruturas e riscos de transição afetam pessoas" }, { id: "b", text: "Riscos físicos são imediatos e riscos de transição são de longo prazo" }, { id: "c", text: "Riscos físicos resultam de eventos ou mudanças climáticas e riscos de transição decorrem do processo de ajuste para uma economia de baixo carbono", correct: true }, { id: "d", text: "Riscos físicos são calculáveis e riscos de transição são imprevisíveis" } ], feedback: { correct: "Correto! Riscos físicos estão associados aos impactos diretos das mudanças climáticas (como eventos extremos e mudanças nos padrões climáticos), enquanto riscos de transição estão relacionados às mudanças políticas, tecnológicas e de mercado associadas à transição para uma economia de baixo carbono.", incorrect: "Incorreto. A distinção correta é que riscos físicos são aqueles que resultam diretamente de eventos climáticos ou mudanças nos padrões climáticos, enquanto riscos de transição decorrem do processo de ajuste para uma economia de baixo carbono." }, category: "concepts" }, { id: 3, title: "Questão 3", text: "Por que a quantificação e precificação de riscos climáticos é importante para empresas com ativos offshore?", options: [ { id: "a", text: "Apenas para cumprir requisitos regulatórios" }, { id: "b", text: "Somente para reduzir prêmios de seguro" }, { id: "c", text: "Apenas para marketing e relações públicas" }, { id: "d", text: "Para tomada de decisões informadas sobre investimentos, alocação de capital, planejamento estratégico e adaptação", correct: true } ], feedback: { correct: "Correto! A quantificação e precificação de riscos climáticos permite às empresas tomar decisões mais informadas sobre seus ativos offshore, otimizar a alocação de capital, desenvolver estratégias de adaptação eficazes e cumprir requisitos crescentes de divulgação de informações relacionadas ao clima.", incorrect: "Incorreto. A quantificação de riscos climáticos tem múltiplos propósitos para empresas com ativos offshore, principalmente permitir tomadas de decisão informadas sobre investimentos, alocação de capital, planejamento estratégico e implementação de medidas de adaptação." }, category: "concepts" }, { id: 4, title: "Questão 4", text: "Quais são os principais perigos climáticos que afetam embarcações offshore?", options: [ { id: "a", text: "Apenas tsunamis e terremotos" }, { id: "b", text: "Ciclones tropicais, ondas extremas, tempestades extratropicais e variações no nível do mar", correct: true }, { id: "c", text: "Somente mudanças graduais na temperatura do oceano" }, { id: "d", text: "Apenas ciclones tropicais e inundações costeiras" } ], feedback: { correct: "Correto! Embarcações offshore são principalmente afetadas por perigos climáticos como ciclones tropicais, ondas extremas, tempestades extratropicais e variações no nível do mar. Estes eventos podem causar danos estruturais significativos e interrupções operacionais.", incorrect: "Incorreto. Os principais perigos climáticos que afetam embarcações offshore incluem ciclones tropicais, ondas extremas, tempestades extratropicais e variações no nível do mar, que podem causar tanto danos estruturais quanto interrupções operacionais." }, category: "concepts" }, { id: 5, title: "Questão 5", text: "Qual a principal diferença entre CLIMADA Core e CLIMADA Petals?", options: [ { id: "a", text: "O Core é pago e o Petals é gratuito" }, { id: "b", text: "O Core contém os módulos básicos essenciais, enquanto o Petals contém extensões e módulos específicos para gerar dados", correct: true }, { id: "c", text: "O Core é para análises qualitativas e o Petals para análises quantitativas" }, { id: "d", text: "O Core é apenas para Windows e o Petals para Linux" } ], feedback: { correct: "Correto! O CLIMADA Core contém todos os módulos necessários para cálculos de impacto probabilístico, danos evitados, incerteza e previsões. Já o CLIMADA Petals contém módulos para geração de dados específicos (como TC_Surge, WildFire, OpenStreetMap) e depende do Core para funcionar.", incorrect: "Incorreto. A distinção entre CLIMADA Core e Petals é estrutural: o Core contém as funcionalidades essenciais para cálculos de impacto, enquanto o Petals contém extensões e módulos para geração de dados específicos, construídos sobre o Core." }, category: "platform" }, { id: 6, title: "Questão 6", text: "Quais são os principais componentes do CLIMADA para análise de risco?", options: [ { id: "a", text: "Apenas Hazard e Exposures" }, { id: "b", text: "Hazard, Exposures, Impact Functions e Engine", correct: true }, { id: "c", text: "Somente Engine e Adaptação" }, { id: "d", text: "Apenas Modelos Climáticos e Análise Financeira" } ], feedback: { correct: "Correto! Os principais componentes do CLIMADA são: Hazard (que caracteriza os perigos climáticos), Exposures (que representa os ativos expostos), Impact Functions (que descrevem a vulnerabilidade) e o Engine (que calcula os impactos combinando esses elementos).", incorrect: "Incorreto. Os principais componentes do CLIMADA para análise de risco são Hazard (perigos), Exposures (exposição), Impact Functions (vulnerabilidade) e o Engine (cálculo de impactos)." }, category: "platform" }, { id: 7, title: "Questão 7", text: "Por que o CLIMADA utiliza uma abordagem de código aberto?", options: [ { id: "a", text: "Apenas para reduzir custos de desenvolvimento" }, { id: "b", text: "Somente para fins educacionais" }, { id: "c", text: "Para garantir transparência, auditabilidade e permitir contribuições da comunidade", correct: true }, { id: "d", text: "Apenas para facilitar a comercialização do software" } ], feedback: { correct: "Correto! A abordagem de código aberto do CLIMADA promove transparência e auditabilidade, elementos essenciais em análises de risco climático, além de permitir que a comunidade científica contribua para seu desenvolvimento e melhoria contínua.", incorrect: "Incorreto. O CLIMADA utiliza uma abordagem de código aberto principalmente para garantir transparência e auditabilidade nas análises de risco climático, além de permitir contribuições da comunidade científica para seu desenvolvimento." }, category: "platform" }, { id: 8, title: "Questão 8", text: "Qual é o método recomendado para instalar o CLIMADA?", options: [ { id: "a", text: "Via pip install sem ambiente virtual" }, { id: "b", text: "Compilando manualmente a partir do código-fonte" }, { id: "c", text: "Usando conda-forge em um ambiente Conda/Mamba dedicado", correct: true }, { id: "d", text: "Através de um instalador executável (.exe)" } ], feedback: { correct: "Correto! A instalação recomendada do CLIMADA é através do conda-forge em um ambiente Conda/Mamba dedicado, usando o comando 'mamba install -c conda-forge climada'. Isso garante a correta resolução de dependências e isolamento do ambiente.", incorrect: "Incorreto. O método recomendado para instalar o CLIMADA é através do conda-forge em um ambiente Conda/Mamba dedicado, usando o comando 'mamba install -c conda-forge climada'." }, category: "setup" }, { id: 9, title: "Questão 9", text: "Qual é a principal ferramenta de desenvolvimento e análise recomendada para uso com o CLIMADA?", options: [ { id: "a", text: "Excel com macros Python" }, { id: "b", text: "Jupyter Notebook / JupyterLab", correct: true }, { id: "c", text: "Apenas terminal de linha de comando" }, { id: "d", "text": "Uma IDE proprietária específica" } ], feedback: { correct: "Correto! O Jupyter Notebook ou JupyterLab é a ferramenta recomendada para trabalhar com CLIMADA, pois permite combinar código, visualizações e explicações em um único documento interativo, facilitando a análise exploratória e a documentação do trabalho.", incorrect: "Incorreto. O Jupyter Notebook / JupyterLab é a principal ferramenta recomendada para uso com CLIMADA, pois oferece um ambiente interativo que combina código, visualizações e documentação em um único lugar." }, category: "setup" }, { id: 10, title: "Questão 10", text: "Qual comando ou ação verifica se o CLIMADA foi instalado e está acessível no seu ambiente Python?", options: [ { id: "a", text: "Executar 'python --version' no terminal" }, { id: "b", text: "Executar 'conda list climada' no terminal" }, { id: "c", text: "Importar o pacote com 'import climada' em um script ou notebook Python", correct: true }, { id: "d", text: "Verificar a pasta de instalação do Python" } ], feedback: { correct: "Correto! A forma mais direta de verificar se o CLIMADA está instalado e acessível no ambiente Python ativo é tentar importá-lo. Se 'import climada' funcionar sem erros, a instalação básica está correta.", incorrect: "Incorreto. A verificação fundamental é tentar importar o pacote ('import climada') no Python. 'conda list' também mostra, mas a importação confirma que o Python consegue encontrá-lo." }, category: "setup" } ];

        // DOM Elements
        const startButton = document.getElementById('start-quiz');
        const quizContainer = document.getElementById('quiz-container');
        const introContainer = document.getElementById('intro-section');
        const resultsContainer = document.getElementById('results-container');
        const questionTitle = document.getElementById('question-title');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackContainer = document.getElementById('feedback-container');
        const feedbackBox = document.getElementById('feedback-box');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const checkAnswerButton = document.getElementById('check-answer');
        const nextButton = document.getElementById('next-button');
        const prevButton = document.getElementById('prev-button');
        const questionCounter = document.getElementById('question-counter');
        const steps = document.querySelectorAll('.step');
        const stepConnectors = document.querySelectorAll('.step-connector');

        // Quiz State
        let currentQuestionIndex = 0;
        let selectedOptionId = null;
        let userAnswers = Array(quizQuestions.length).fill(null);
        let questionsAttempted = Array(quizQuestions.length).fill(false); // Track if feedback was shown
        let scores = { total: 0, concepts: 0, platform: 0, setup: 0 };
        let scoreMap = {}; // To prevent multiple score increments per question

        // Start Quiz
        startButton.addEventListener('click', () => {
            introContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            resetQuizState(); // Reset state if restarting
            loadQuestion(0);
        });

         // Reset Quiz State
         function resetQuizState() {
             currentQuestionIndex = 0;
             selectedOptionId = null;
             userAnswers.fill(null);
             questionsAttempted.fill(false);
             scores = { total: 0, concepts: 0, platform: 0, setup: 0 };
             scoreMap = {};
             resultsContainer.classList.add('hidden'); // Hide results if resetting
             quizContainer.classList.remove('hidden'); // Show quiz
         }

        // Load Question
        function loadQuestion(index) {
            const question = quizQuestions[index];
            currentQuestionIndex = index;
            selectedOptionId = userAnswers[index]; // Restore previous selection if navigating back

            // Update question text
            questionTitle.textContent = question.title;
            questionText.textContent = question.text;
            questionCounter.textContent = `Questão ${index + 1}/${quizQuestions.length}`;

            // Clear previous options
            optionsContainer.innerHTML = '';

            // Add options
            question.options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('quiz-option');
                optionElement.setAttribute('role', 'radio'); // Semantics
                optionElement.setAttribute('tabindex', '0'); // Keyboard navigable
                optionElement.setAttribute('aria-checked', 'false');
                optionElement.dataset.optionId = option.id; // Store option id

                 let isSelected = userAnswers[index] === option.id;
                 if (isSelected) {
                     optionElement.classList.add('selected');
                     optionElement.setAttribute('aria-checked', 'true');
                 }

                optionElement.innerHTML = `
                    <div class="flex items-start pointer-events-none"> <!-- Disable pointer events on inner elements -->
                         <div class="flex-shrink-0 mt-1 mr-3">
                             <div class="w-5 h-5 border-2 ${isSelected ? 'border-primary bg-primary' : 'border-gray-400'} rounded-full flex items-center justify-center transition-colors duration-200">
                                 ${isSelected ? '<div class="w-2 h-2 bg-white rounded-full"></div>' : ''}
                             </div>
                         </div>
                         <div class="flex-1">
                            <span class="font-medium text-gray-800">${option.id.toUpperCase()}.</span>
                            <span class="text-gray-700 ml-1">${option.text}</span>
                        </div>
                    </div>`;

                // Event listener for selection
                 optionElement.addEventListener('click', () => handleOptionSelect(option.id));
                 optionElement.addEventListener('keydown', (e) => {
                     if (e.key === 'Enter' || e.key === ' ') {
                         e.preventDefault();
                         handleOptionSelect(option.id);
                     }
                 });


                optionsContainer.appendChild(optionElement);
            });

            // Handle previously answered state
            if (questionsAttempted[index]) {
                 showFeedbackForAnsweredQuestion();
                 checkAnswerButton.classList.add('hidden');
                 nextButton.classList.remove('hidden');
             } else {
                 feedbackContainer.classList.add('hidden');
                 checkAnswerButton.classList.remove('hidden');
                 nextButton.classList.add('hidden');
             }


            // Update prev button visibility
            prevButton.classList.toggle('hidden', index === 0);

            // Update progress indicators
            updateProgressIndicators();
        }

        // Handle option selection
         function handleOptionSelect(optionId) {
             // Only allow selection if the question hasn't been attempted yet
             if (questionsAttempted[currentQuestionIndex]) return;

             selectedOptionId = optionId;
             userAnswers[currentQuestionIndex] = optionId; // Store selection immediately

             // Update visual state of options
             document.querySelectorAll('.quiz-option').forEach(opt => {
                 const isCurrent = opt.dataset.optionId === optionId;
                 opt.classList.toggle('selected', isCurrent);
                 opt.setAttribute('aria-checked', isCurrent ? 'true' : 'false');
                 const radioIndicator = opt.querySelector('.border-2');
                 if (radioIndicator) {
                     radioIndicator.classList.toggle('border-primary', isCurrent);
                     radioIndicator.classList.toggle('bg-primary', isCurrent);
                     radioIndicator.classList.toggle('border-gray-400', !isCurrent);
                     radioIndicator.innerHTML = isCurrent ? '<div class="w-2 h-2 bg-white rounded-full"></div>' : '';
                 }
             });
         }


        // Check Answer
        checkAnswerButton.addEventListener('click', () => {
            if (selectedOptionId === null && userAnswers[currentQuestionIndex] === null) {
                // Maybe show a gentle prompt instead of alert
                 const firstOption = optionsContainer.querySelector('.quiz-option');
                 if (firstOption) {
                     firstOption.focus(); // Focus the first option
                     // Optionally add a temporary visual cue
                 }
                return;
            }
             // Use the stored answer if check is clicked without re-selecting
             const answerToCheck = selectedOptionId || userAnswers[currentQuestionIndex];
             if (!answerToCheck) return; // Should not happen if logic above is sound

            const question = quizQuestions[currentQuestionIndex];
            const selectedOption = question.options.find(opt => opt.id === answerToCheck);
            const isCorrect = selectedOption.correct === true;

            questionsAttempted[currentQuestionIndex] = true; // Mark as attempted

            // Update score only once per question
            if (!(currentQuestionIndex in scoreMap)) {
                 scoreMap[currentQuestionIndex] = isCorrect; // Store correctness
                 if (isCorrect) {
                    scores.total++;
                    if (question.category === 'concepts') scores.concepts++;
                    if (question.category === 'platform') scores.platform++;
                    if (question.category === 'setup') scores.setup++;
                 }
            }

            showFeedbackForAnsweredQuestion(); // Refactored feedback display

            // Update buttons
            checkAnswerButton.classList.add('hidden');
            nextButton.classList.remove('hidden');
             if (currentQuestionIndex === quizQuestions.length - 1) {
                 nextButton.innerHTML = 'Ver Resultados <i class="fas fa-poll ml-2"></i>'; // Change text on last question
             } else {
                 nextButton.innerHTML = 'Próxima Questão <i class="fas fa-arrow-right ml-2"></i>';
             }

            // Update progress indicators
            updateProgressIndicators();
        });

         // Function to display feedback for an already answered question
         function showFeedbackForAnsweredQuestion() {
             const question = quizQuestions[currentQuestionIndex];
             const storedAnswerId = userAnswers[currentQuestionIndex];
             if (storedAnswerId === null) return; // Should not happen if attempted

             const selectedOption = question.options.find(opt => opt.id === storedAnswerId);
             const isCorrect = selectedOption.correct === true;

             // Show feedback container
             feedbackContainer.classList.remove('hidden');
             feedbackBox.className = `feedback-box ${isCorrect ? 'correct' : 'incorrect'}`;
             feedbackTitle.textContent = isCorrect ? 'Resposta Correta!' : 'Resposta Incorreta.';
             feedbackText.textContent = isCorrect ? question.feedback.correct : question.feedback.incorrect;

             // Update option styling to reflect stored answer and correctness
             document.querySelectorAll('.quiz-option').forEach(optElement => {
                 const optionId = optElement.dataset.optionId;
                 const optionData = question.options.find(opt => opt.id === optionId);

                 optElement.classList.remove('correct', 'incorrect', 'selected'); // Clear previous states
                 optElement.style.cursor = 'default'; // Make non-clickable visually
                 optElement.onclick = null; // Remove handler

                 if (optionId === storedAnswerId) {
                     optElement.classList.add(isCorrect ? 'correct' : 'incorrect');
                 } else if (optionData.correct) {
                     // Highlight the correct answer if the selected one was wrong
                      if (!isCorrect) {
                           optElement.classList.add('correct');
                      }
                 }
             });
         }

        // Next Question / Show Results
        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                loadQuestion(currentQuestionIndex + 1);
            } else {
                showResults();
            }
        });

        // Previous Question
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                loadQuestion(currentQuestionIndex - 1);
            }
        });

        // Update Progress Indicators
        function updateProgressIndicators() {
            steps.forEach((step, index) => {
                const stepNumberSpan = step.querySelector('span'); // Get the number span
                step.classList.remove('active', 'completed');
                step.innerHTML = `<span>${index + 1}</span>`; // Reset content

                if (index === currentQuestionIndex) {
                    step.classList.add('active');
                } else if (questionsAttempted[index]) {
                    step.classList.add('completed');
                    // Update content to checkmark if completed
                     step.innerHTML = `<i class="fas fa-check text-xs"></i>`;
                 } else {
                     // Ensure span is present for non-completed, non-active steps
                     step.innerHTML = `<span>${index + 1}</span>`;
                 }
            });

            stepConnectors.forEach((connector, index) => {
                connector.classList.toggle('completed', questionsAttempted[index]);
            });
        }

        // Show Results
         let scoreChartInstance = null; // To hold the chart instance
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');

            // Update score value
            document.getElementById('score-value').textContent = scores.total;

            // Calculate percentages
             const conceptsTotal = 4; // Hardcoded, could be dynamic
             const platformTotal = 3;
             const setupTotal = 3;
            const conceptsPercentage = (scores.concepts / conceptsTotal) * 100;
            const platformPercentage = (scores.platform / platformTotal) * 100;
            const setupPercentage = (scores.setup / setupTotal) * 100;

            // Update score bars
            document.getElementById('score-concepts').style.width = `${conceptsPercentage}%`;
            document.getElementById('score-platform').style.width = `${platformPercentage}%`;
            document.getElementById('score-setup').style.width = `${setupPercentage}%`;

            // Update score texts
             document.getElementById('text-concepts').textContent = `${scores.concepts}/${conceptsTotal} (${Math.round(conceptsPercentage)}%)`;
             document.getElementById('text-platform').textContent = `${scores.platform}/${platformTotal} (${Math.round(platformPercentage)}%)`;
             document.getElementById('text-setup').textContent = `${scores.setup}/${setupTotal} (${Math.round(setupPercentage)}%)`;


            // Update feedback message and icon
            const feedbackMessage = document.getElementById('feedback-message');
            const resultIcon = document.getElementById('result-icon');
             const scoreThresholdExcellent = 8;
             const scoreThresholdGood = 6;

            if (scores.total >= scoreThresholdExcellent) {
                feedbackMessage.innerHTML = `<p class="mb-2"><strong>Excelente trabalho!</strong> Ótima compreensão dos conceitos fundamentais do Módulo 1.</p><p>Você está pronto para aplicar esses conhecimentos na Prática 1 e avançar.</p>`;
                resultIcon.className = 'fas fa-trophy text-5xl text-yellow-500'; // Gold trophy
            } else if (scores.total >= scoreThresholdGood) {
                feedbackMessage.innerHTML = `<p class="mb-2"><strong>Bom trabalho!</strong> Você compreendeu a maioria dos conceitos. </p><p>Recomendamos uma rápida revisão nas áreas com menor pontuação antes de ir para a Prática 1.</p>`;
                 resultIcon.className = 'fas fa-medal text-5xl text-blue-600'; // Blue medal
            } else {
                feedbackMessage.innerHTML = `<p class="mb-2"><strong>Continue estudando!</strong> Recomendamos revisar o conteúdo do Módulo 1 com atenção.</p><p>Foque nos conceitos de risco, estrutura CLIMADA e ambiente antes de prosseguir. Use os Recursos Complementares.</p>`;
                 resultIcon.className = 'fas fa-book-reader text-5xl text-green-600'; // Book reader
            }

             // Ensure canvas is clean before creating new chart
             const ctx = document.getElementById('score-chart').getContext('2d');
             if (scoreChartInstance) {
                 scoreChartInstance.destroy(); // Destroy previous instance if exists
             }

             // Create doughnut chart
             scoreChartInstance = new Chart(ctx, {
                 type: 'doughnut',
                 data: {
                     labels: ['Corretas', 'Incorretas'],
                     datasets: [{
                         data: [scores.total, quizQuestions.length - scores.total],
                         backgroundColor: [
                             '#2ecc71', // --success color (verde claro)
                             '#e5e7eb'  // cinza claro
                         ],
                         borderColor: [ // Adiciona bordas sutis
                             '#27ae60', // success dark
                             '#d1d5db' // cinza
                         ],
                         borderWidth: 1
                     }]
                 },
                 options: {
                    cutout: '70%', // Adjust cutout percentage
                    responsive: true,
                    maintainAspectRatio: true, // Maintain aspect ratio
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed !== null) {
                                        label += context.parsed;
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    animation: { animateScale: true, animateRotate: true }
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
             // Quiz starts hidden
        });
    </script>
</body>
</html>