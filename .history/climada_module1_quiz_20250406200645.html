<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Módulo 1: Fundamentos do Risco Climático e Introdução ao CLIMADA</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0f4c81;
            --secondary-color: #3e92cc;
            --accent-color: #f0a500;
            --correct-color: #4caf50;
            --incorrect-color: #f44336;
            --neutral-color: #e9ecef;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: 0.5rem;
        }
        
        .quiz-container {
            position: relative;
        }
        
        .question-container {
            margin-bottom: 2rem;
            border: 1px solid #dee2e6;
            border-radius: 0.5rem;
            padding: 1.5rem;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: none;
        }
        
        .question-container.active {
            display: block;
        }
        
        .question {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }
        
        .answer-container {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: background-color 0.2s;
            border: 1px solid #dee2e6;
        }
        
        .answer-container:hover {
            background-color: #f1f3f5;
        }
        
        .answer-container.selected {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .answer-container.correct {
            background-color: var(--correct-color);
            color: white;
        }
        
        .answer-container.incorrect {
            background-color: var(--incorrect-color);
            color: white;
        }
        
        .feedback {
            display: none;
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 0.25rem;
            background-color: var(--neutral-color);
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0a3a60;
        }
        
        .btn-secondary {
            background-color: var(--neutral-color);
            color: #333;
        }
        
        .btn-secondary:hover {
            background-color: #dee2e6;
        }
        
        .btn-accent {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-accent:hover {
            background-color: #d89400;
        }
        
        .progress-container {
            margin: 2rem 0;
            background-color: #e9ecef;
            border-radius: 0.25rem;
            height: 0.5rem;
        }
        
        .progress-bar {
            height: 100%;
            border-radius: 0.25rem;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .score-display {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        #quiz-summary {
            display: none;
            padding: 2rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .summary-result {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
        }
        
        .recommendation {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 0.5rem;
            background-color: var(--neutral-color);
        }
        
        .diagram-img {
            max-width: 100%;
            height: auto;
            margin: 1rem 0;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
        }
        
        .intro {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: #e9ecef;
            border-radius: 0.5rem;
        }
        
        .category-heading {
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .question-container {
                padding: 1rem;
            }
            
            .navigation {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="text-2xl font-bold">Avaliação do Módulo 1</h1>
            <h2 class="text-xl">Fundamentos do Risco Climático e Introdução ao CLIMADA</h2>
        </div>
        
        <div id="quiz-intro" class="intro">
            <h3 class="text-xl font-bold mb-3">Objetivo da Avaliação</h3>
            <p class="mb-4">Este quiz avaliará sua compreensão dos conceitos fundamentais de risco climático, a plataforma CLIMADA e a configuração do ambiente de trabalho apresentados no Módulo 1.</p>
            
            <h3 class="text-xl font-bold mb-3">Instruções</h3>
            <ul class="list-disc pl-5 mb-4">
                <li>O quiz contém 10 questões de múltipla escolha</li>
                <li>Selecione a resposta que você considera correta para cada pergunta</li>
                <li>Após selecionar, clique em "Verificar Resposta" para receber feedback imediato</li>
                <li>Navegue entre as questões usando os botões "Anterior" e "Próxima"</li>
                <li>Sua pontuação será atualizada em tempo real</li>
                <li>Ao final, você receberá um resumo do seu desempenho e recomendações personalizadas</li>
            </ul>
            
            <button id="start-quiz" class="btn btn-primary w-full">Iniciar Quiz</button>
        </div>
        
        <div id="quiz-container" class="quiz-container" style="display: none;">
            <div class="score-display">
                <span id="current-score">0</span> de <span id="total-questions">10</span> acertos
            </div>
            
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            
            <!-- Questão 1 -->
            <div class="question-container" data-category="conceitos-risco">
                <div class="category-heading">Conceitos Fundamentais de Risco Climático</div>
                <div class="question">1. Qual das seguintes opções representa corretamente os três componentes fundamentais do risco climático?</div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Perigo, Exposição e Vulnerabilidade</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Impacto, Adaptação e Mitigação</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Exposição, Resiliência e Perdas</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Dano, Frequência e Intensidade</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> O risco climático é definido pela interação entre Perigo (evento climático), Exposição (ativos em risco) e Vulnerabilidade (suscetibilidade a danos). Estes três componentes formam a base da análise de risco no CLIMADA.</p>
                </div>
            </div>
            
            <!-- Questão 2 -->
            <div class="question-container" data-category="conceitos-risco">
                <div class="category-heading">Conceitos Fundamentais de Risco Climático</div>
                <div class="question">2. Qual a principal diferença entre riscos físicos e riscos de transição relacionados às mudanças climáticas?</div>
                <div class="answer-container">
                    <div class="answer">Riscos físicos são quantificáveis, enquanto riscos de transição são qualitativos</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Riscos físicos derivam de eventos climáticos, enquanto riscos de transição resultam da mudança para uma economia de baixo carbono</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Riscos físicos afetam apenas infraestruturas, enquanto riscos de transição afetam apenas mercados financeiros</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Riscos físicos são de curto prazo, enquanto riscos de transição são sempre de longo prazo</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> Riscos físicos derivam diretamente dos impactos de eventos climáticos (como tempestades, inundações e aumento do nível do mar), enquanto riscos de transição surgem das mudanças políticas, tecnológicas e de mercado associadas à transição para uma economia de baixo carbono.</p>
                </div>
            </div>
            
            <!-- Questão 3 -->
            <div class="question-container" data-category="conceitos-risco">
                <div class="category-heading">Conceitos Fundamentais de Risco Climático</div>
                <div class="question">3. Qual dos seguintes perigos climáticos representa o maior risco para embarcações offshore?</div>
                <div class="answer-container">
                    <div class="answer">Ondas de calor intensas</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Secas prolongadas</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Ciclones tropicais com ventos extremos e ondas altas</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Incêndios florestais</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> Ciclones tropicais com seus ventos extremos e ondas altas representam o maior risco para embarcações offshore, podendo causar danos estruturais significativos, interromper operações e até mesmo causar acidentes graves como derramamentos de óleo.</p>
                </div>
            </div>
            
            <!-- Questão 4 -->
            <div class="question-container" data-category="plataforma-climada">
                <div class="category-heading">Introdução à Plataforma CLIMADA</div>
                <div class="question">4. Qual a estrutura principal da arquitetura do CLIMADA?</div>
                <div class="answer-container">
                    <div class="answer">Client e Server</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Frontend e Backend</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Core e Petals</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Engine e Framework</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> O CLIMADA é dividido em Core e Petals. O Core contém todas as funcionalidades fundamentais para cálculos de impacto probabilístico, danos evitados e análises de incerteza, enquanto o Petals contém módulos adicionais para geração e processamento de dados específicos.</p>
                </div>
            </div>
            
            <!-- Questão 5 -->
            <div class="question-container" data-category="plataforma-climada">
                <div class="category-heading">Introdução à Plataforma CLIMADA</div>
                <div class="question">5. Observe o diagrama e identifique qual elemento está incorretamente representado na arquitetura do CLIMADA:</div>
                <img src="https://i.imgur.com/j2CQMnL.png" alt="Diagrama da arquitetura CLIMADA" class="diagram-img">
                <div class="answer-container">
                    <div class="answer">Hazard (Perigo)</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Exposures (Exposição)</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Database (Banco de Dados)</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Impact Functions (Funções de Impacto)</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> "Database" não é um componente principal da arquitetura do CLIMADA. Os componentes principais são: Hazard (Perigo), Exposures (Exposição), Impact Functions (Funções de Impacto) e o Engine que conecta estes elementos para análise de risco e adaptação.</p>
                </div>
            </div>
            
            <!-- Questão 6 -->
            <div class="question-container" data-category="plataforma-climada">
                <div class="category-heading">Introdução à Plataforma CLIMADA</div>
                <div class="question">6. Qual é a sequência correta do fluxo de trabalho básico para análise de risco com CLIMADA?</div>
                <div class="answer-container">
                    <div class="answer">Definir funções de impacto → Modelar perigos → Calcular impactos → Mapear exposições</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Modelar perigos → Mapear exposições → Definir funções de impacto → Calcular impactos</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Calcular impactos → Modelar perigos → Mapear exposições → Definir medidas de adaptação</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Mapear exposições → Calcular impactos → Modelar perigos → Definir funções de impacto</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> O fluxo de trabalho típico no CLIMADA começa com a modelagem dos perigos climáticos (Hazard), seguida pela definição dos ativos expostos (Exposures), então pela especificação das funções de impacto que relacionam perigos a danos (Impact Functions), e finalmente pelo cálculo dos impactos usando esses três componentes.</p>
                </div>
            </div>
            
            <!-- Questão 7 -->
            <div class="question-container" data-category="plataforma-climada">
                <div class="category-heading">Introdução à Plataforma CLIMADA</div>
                <div class="question">7. Qual das seguintes NÃO é uma vantagem do código aberto para análise de risco climático?</div>
                <div class="answer-container">
                    <div class="answer">Transparência metodológica</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Auditabilidade dos cálculos</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Possibilidade de extensão e personalização</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">Garantia de precisão superior a modelos proprietários</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> Ser código aberto não garante automaticamente maior precisão em comparação com modelos proprietários. A precisão depende da qualidade dos dados, metodologias e validação, independentemente de o código ser aberto ou proprietário. As outras opções são benefícios reais do código aberto: transparência, auditabilidade e flexibilidade.</p>
                </div>
            </div>
            
            <!-- Questão 8 -->
            <div class="question-container" data-category="ambiente-trabalho">
                <div class="category-heading">Configuração do Ambiente de Trabalho</div>
                <div class="question">8. Qual comando é recomendado para instalar o CLIMADA em um ambiente virtual?</div>
                <div class="answer-container">
                    <div class="answer">pip install climada</div>
                </div>
                <div class="answer-container">
                    <div class="answer">apt-get install climada</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">mamba install -c conda-forge climada</div>
                </div>
                <div class="answer-container">
                    <div class="answer">git clone climada-python && python setup.py install</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> O comando recomendado para instalar o CLIMADA é "mamba install -c conda-forge climada". O Mamba é uma implementação mais rápida do gerenciador de pacotes Conda e é a forma recomendada de instalar o CLIMADA conforme a documentação oficial.</p>
                </div>
            </div>
            
            <!-- Questão 9 -->
            <div class="question-container" data-category="ambiente-trabalho">
                <div class="category-heading">Configuração do Ambiente de Trabalho</div>
                <div class="question">9. Qual das seguintes afirmações sobre o Jupyter Notebook no contexto do CLIMADA é INCORRETA?</div>
                <div class="answer-container">
                    <div class="answer">Permite combinar código Python com visualizações e explicações textuais</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">É obrigatório para executar qualquer análise com CLIMADA</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Facilita o compartilhamento de análises completas com outros usuários</div>
                </div>
                <div class="answer-container">
                    <div class="answer">Suporta a execução interativa de código e visualização de resultados</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> O Jupyter Notebook não é obrigatório para executar análises com CLIMADA. Embora seja uma ferramenta recomendada e muito útil para análises interativas, também é possível utilizar o CLIMADA em scripts Python regulares, em IDEs como PyCharm ou VSCode, ou até mesmo como parte de sistemas maiores.</p>
                </div>
            </div>
            
            <!-- Questão 10 -->
            <div class="question-container" data-category="ambiente-trabalho">
                <div class="category-heading">Configuração do Ambiente de Trabalho</div>
                <div class="question">10. Qual comando Python pode ser usado para verificar se a instalação do CLIMADA foi bem-sucedida?</div>
                <div class="answer-container">
                    <div class="answer">python -m climada.test</div>
                </div>
                <div class="answer-container">
                    <div class="answer">import climada.test()</div>
                </div>
                <div class="answer-container">
                    <div class="answer">check_climada()</div>
                </div>
                <div class="answer-container" data-correct="true">
                    <div class="answer">import climada</div>
                </div>
                <div class="feedback">
                    <p><strong>Correto!</strong> O comando mais simples para verificar se o CLIMADA foi instalado corretamente é "import climada" em um ambiente Python. Se esse comando for executado sem erros, significa que o pacote básico está instalado. Para testes mais completos, você poderia importar e executar exemplos específicos dos módulos.</p>
                </div>
            </div>
            
            <div class="navigation">
                <button id="prev-btn" class="btn btn-secondary">Anterior</button>
                <button id="check-btn" class="btn btn-accent">Verificar Resposta</button>
                <button id="next-btn" class="btn btn-primary">Próxima</button>
            </div>
        </div>
        
        <div id="quiz-summary" class="mt-8">
            <h3 class="text-2xl font-bold mb-4 text-center">Resumo do Quiz</h3>
            
            <div class="summary-result">
                Você acertou <span id="final-score">0</span> de 10 questões!
            </div>
            
            <div class="mb-6">
                <h4 class="text-xl font-bold mb-3">Desempenho por Área</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h5 class="font-bold mb-2">Conceitos de Risco Climático</h5>
                        <div class="text-center text-lg" id="score-concepts">0/3</div>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h5 class="font-bold mb-2">Plataforma CLIMADA</h5>
                        <div class="text-center text-lg" id="score-platform">0/4</div>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h5 class="font-bold mb-2">Ambiente de Trabalho</h5>
                        <div class="text-center text-lg" id="score-environment">0/3</div>
                    </div>
                </div>
            </div>
            
            <div id="recommendation-container" class="recommendation">
                <h4 class="text-xl font-bold mb-3">Recomendações Personalizadas</h4>
                <div id="recommendation-text">
                    <!-- Conteúdo será adicionado via JavaScript -->
                </div>
            </div>
            
            <div class="mt-8">
                <h4 class="text-xl font-bold mb-3">Próximos Passos</h4>
                <p class="mb-4">Agora que você completou o Quiz do Módulo 1, está pronto para aplicar os conceitos na prática:</p>
                <ul class="list-disc pl-5 mb-6">
                    <li>Complete a <a href="#" class="text-blue-600 underline">Prática 1: Instalação e Primeiro Contato com a API</a></li>
                    <li>Revise o conteúdo do Módulo 1 conforme necessário</li>
                    <li>Prepare-se para o <a href="#" class="text-blue-600 underline">Módulo 2: Modelagem de Perigos Climáticos</a></li>
                </ul>
            </div>
            
            <div class="flex justify-center space-x-4 mt-8">
                <button id="restart-btn" class="btn btn-primary">Refazer Quiz</button>
                <button id="module-btn" class="btn btn-accent">Voltar ao Módulo</button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos do DOM
            const quizIntro = document.getElementById('quiz-intro');
            const quizContainer = document.getElementById('quiz-container');
            const quizSummary = document.getElementById('quiz-summary');
            const startQuizBtn = document.getElementById('start-quiz');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const checkBtn = document.getElementById('check-btn');
            const restartBtn = document.getElementById('restart-btn');
            const moduleBtn = document.getElementById('module-btn');
            const progressBar = document.getElementById('progress-bar');
            const currentScoreDisplay = document.getElementById('current-score');
            const finalScoreDisplay = document.getElementById('final-score');
            const scoreConceptsDisplay = document.getElementById('score-concepts');
            const scorePlatformDisplay = document.getElementById('score-platform');
            const scoreEnvironmentDisplay = document.getElementById('score-environment');
            const recommendationText = document.getElementById('recommendation-text');
            
            // Variáveis do quiz
            const questions = document.querySelectorAll('.question-container');
            let currentQuestion = 0;
            let score = 0;
            let scoreByCategory = {
                'conceitos-risco': 0,
                'plataforma-climada': 0,
                'ambiente-trabalho': 0
            };
            let answeredQuestions = new Set();
            let questionsChecked = new Array(questions.length).fill(false);
            
            // Inicializar o quiz
            function initQuiz() {
                showQuestion(0);
                updateProgressBar();
                updateScore();
            }
            
            // Mostrar uma questão específica
            function showQuestion(index) {
                questions.forEach((question, i) => {
                    if (i === index) {
                        question.classList.add('active');
                    } else {
                        question.classList.remove('active');
                    }
                });
                
                // Atualizar estado dos botões
                prevBtn.disabled = index === 0;
                prevBtn.style.opacity = index === 0 ? '0.5' : '1';
                nextBtn.disabled = index === questions.length - 1;
                nextBtn.style.opacity = index === questions.length - 1 ? '0.5' : '1';
                
                // Atualizar estado do botão de verificação
                checkBtn.disabled = questionsChecked[index];
                checkBtn.style.opacity = questionsChecked[index] ? '0.5' : '1';
                checkBtn.textContent = questionsChecked[index] ? 'Resposta Verificada' : 'Verificar Resposta';
                
                // Atualizar progresso
                currentQuestion = index;
                updateProgressBar();
            }
            
            // Atualizar barra de progresso
            function updateProgressBar() {
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                progressBar.style.width = `${progress}%`;
            }
            
            // Atualizar pontuação
            function updateScore() {
                currentScoreDisplay.textContent = score;
                
                // Atualizar pontuação por categoria
                let conceptScore = 0;
                let platformScore = 0;
                let environmentScore = 0;
                
                // Contar acertos por categoria
                questions.forEach((question, index) => {
                    if (!questionsChecked[index]) return;
                    
                    const category = question.dataset.category;
                    const isCorrect = question.querySelector('.answer-container.correct') !== null;
                    
                    if (isCorrect) {
                        if (category === 'conceitos-risco') conceptScore++;
                        if (category === 'plataforma-climada') platformScore++;
                        if (category === 'ambiente-trabalho') environmentScore++;
                    }
                });
                
                // Atualizar totais por categoria
                const totalConcepts = document.querySelectorAll('.question-container[data-category="conceitos-risco"]').length;
                const totalPlatform = document.querySelectorAll('.question-container[data-category="plataforma-climada"]').length;
                const totalEnvironment = document.querySelectorAll('.question-container[data-category="ambiente-trabalho"]').length;
                
                scoreConceptsDisplay.textContent = `${conceptScore}/${totalConcepts}`;
                scorePlatformDisplay.textContent = `${platformScore}/${totalPlatform}`;
                scoreEnvironmentDisplay.textContent = `${environmentScore}/${totalEnvironment}`;
                finalScoreDisplay.textContent = score;
                
                // Salvar para uso nas recomendações
                scoreByCategory = {
                    'conceitos-risco': conceptScore / totalConcepts,
                    'plataforma-climada': platformScore / totalPlatform,
                    'ambiente-trabalho': environmentScore / totalEnvironment
                };
            }
            
            // Verificar resposta
            function checkAnswer() {
                const currentQuestionElement = questions[currentQuestion];
                const selectedAnswer = currentQuestionElement.querySelector('.answer-container.selected');
                const feedback = currentQuestionElement.querySelector('.feedback');
                
                if (!selectedAnswer) {
                    alert('Por favor, selecione uma resposta antes de verificar.');
                    return;
                }
                
                // Mostrar feedback
                feedback.style.display = 'block';
                
                // Marcar como verificada
                questionsChecked[currentQuestion] = true;
                
                // Verificar se está correta
                const isCorrect = selectedAnswer.hasAttribute('data-correct');
                selectedAnswer.classList.remove('selected');
                
                if (isCorrect) {
                    selectedAnswer.classList.add('correct');
                    score++;
                } else {
                    selectedAnswer.classList.add('incorrect');
                    
                    // Mostrar a resposta correta
                    const correctAnswer = currentQuestionElement.querySelector('[data-correct="true"]');
                    if (correctAnswer) {
                        correctAnswer.classList.add('correct');
                    }
                }
                
                // Desabilitar seleção após verificação
                const answers = currentQuestionElement.querySelectorAll('.answer-container');
                answers.forEach(answer => {
                    answer.style.pointerEvents = 'none';
                });
                
                // Atualizar botão de verificação
                checkBtn.disabled = true;
                checkBtn.style.opacity = '0.5';
                checkBtn.textContent = 'Resposta Verificada';
                
                // Adicionar à lista de respondidas
                answeredQuestions.add(currentQuestion);
                
                // Atualizar pontuação
                updateScore();
                
                // Verificar se o quiz foi concluído
                if (answeredQuestions.size === questions.length) {
                    setTimeout(() => {
                        finishQuiz();
                    }, 1500);
                }
            }
            
            // Finalizar o quiz
            function finishQuiz() {
                quizContainer.style.display = 'none';
                quizSummary.style.display = 'block';
                
                // Gerar recomendações baseadas no desempenho
                generateRecommendations();
            }
            
            // Gerar recomendações personalizadas
            function generateRecommendations() {
                let recommendations = '';
                const totalScore = score / questions.length;
                
                // Recomendação geral baseada na pontuação total
                if (totalScore >= 0.8) {
                    recommendations += `<p class="mb-4">Parabéns! Você demonstrou um excelente entendimento dos conceitos fundamentais. Está pronto para avançar para aplicações mais complexas do CLIMADA.</p>`;
                } else if (totalScore >= 0.6) {
                    recommendations += `<p class="mb-4">Bom trabalho! Você compreendeu a maioria dos conceitos principais. Revise alguns pontos específicos antes de avançar.</p>`;
                } else {
                    recommendations += `<p class="mb-4">Você está começando a entender os conceitos, mas recomendamos revisar o Módulo 1 antes de prosseguir para garantir uma base sólida.</p>`;
                }
                
                // Recomendações específicas por categoria
                recommendations += `<h5 class="font-bold mt-4 mb-2">Recomendações por área:</h5><ul class="list-disc pl-5">`;
                
                // Conceitos de Risco Climático
                if (scoreByCategory['conceitos-risco'] < 0.7) {
                    recommendations += `<li class="mb-2"><strong>Conceitos de Risco Climático:</strong> Revise a definição dos três componentes do risco climático e suas interações. Sugerimos reler a <a href="#" class="text-blue-600 underline">Seção 1.1</a> e consultar o artigo <a href="https://doi.org/10.5194/gmd-12-3085-2019" target="_blank" class="text-blue-600 underline">CLIMADA v1</a>.</li>`;
                }
                
                // Plataforma CLIMADA
                if (scoreByCategory['plataforma-climada'] < 0.7) {
                    recommendations += `<li class="mb-2"><strong>Plataforma CLIMADA:</strong> Reforce seu entendimento da arquitetura do CLIMADA e seus componentes principais. Consulte a <a href="https://climada-python.readthedocs.io/en/stable/tutorial/1_main_climada.html" target="_blank" class="text-blue-600 underline">documentação oficial</a> e a <a href="#" class="text-blue-600 underline">Seção 1.2</a>.</li>`;
                }
                
                // Ambiente de Trabalho
                if (scoreByCategory['ambiente-trabalho'] < 0.7) {
                    recommendations += `<li class="mb-2"><strong>Ambiente de Trabalho:</strong> Pratique mais a instalação e configuração do ambiente CLIMADA. Siga o passo a passo da <a href="https://climada-python.readthedocs.io/en/stable/guide/install.html" target="_blank" class="text-blue-600 underline">guia de instalação</a> e complete a <a href="#" class="text-blue-600 underline">Prática 1</a>.</li>`;
                }
                
                recommendations += `</ul>`;
                
                // Adicionar recursos adicionais
                recommendations += `
                <h5 class="font-bold mt-4 mb-2">Recursos adicionais recomendados:</h5>
                <ul class="list-disc pl-5">
                    <li><a href="https://github.com/CLIMADA-project/climada_python" target="_blank" class="text-blue-600 underline">Repositório GitHub do CLIMADA</a></li>
                    <li><a href="https://climada-python.readthedocs.io/en/stable/tutorial/climada_entity_LitPop.html" target="_blank" class="text-blue-600 underline">Tutorial LitPop para modelagem de exposição</a></li>
                    <li><a href="https://www.tcdb.noaa.gov/" target="_blank" class="text-blue-600 underline">Base de dados IBTrACS de ciclones tropicais</a></li>
                </ul>`;
                
                recommendationText.innerHTML = recommendations;
            }
            
            // Reiniciar o quiz
            function restartQuiz() {
                // Resetar variáveis
                currentQuestion = 0;
                score = 0;
                answeredQuestions = new Set();
                questionsChecked = new Array(questions.length).fill(false);
                
                // Resetar UI
                questions.forEach(question => {
                    const answers = question.querySelectorAll('.answer-container');
                    const feedback = question.querySelector('.feedback');
                    
                    answers.forEach(answer => {
                        answer.classList.remove('selected', 'correct', 'incorrect');
                        answer.style.pointerEvents = 'auto';
                    });
                    
                    feedback.style.display = 'none';
                });
                
                // Mostrar primeira questão
                showQuestion(0);
                updateScore();
                
                // Mostrar container do quiz
                quizSummary.style.display = 'none';
                quizContainer.style.display = 'block';
            }
            
            // Event Listeners
            startQuizBtn.addEventListener('click', function() {
                quizIntro.style.display = 'none';
                quizContainer.style.display = 'block';
                initQuiz();
            });
            
            prevBtn.addEventListener('click', function() {
                if (currentQuestion > 0) {
                    showQuestion(currentQuestion - 1);
                }
            });
            
            nextBtn.addEventListener('click', function() {
                if (currentQuestion < questions.length - 1) {
                    showQuestion(currentQuestion + 1);
                }
            });
            
            checkBtn.addEventListener('click', checkAnswer);
            
            restartBtn.addEventListener('click', restartQuiz);
            
            moduleBtn.addEventListener('click', function() {
                // Redirecionar de volta para o módulo 1
                window.location.href = 'climada_module1_complete.html';
            });
            
            // Adicionar event listener para seleção de resposta
            questions.forEach(question => {
                const answers = question.querySelectorAll('.answer-container');
                answers.forEach(answer => {
                    answer.addEventListener('click', function() {
                        // Só permitir seleção se a questão não foi verificada ainda
                        const questionIndex = Array.from(questions).indexOf(question);
                        if (questionsChecked[questionIndex]) return;
                        
                        // Remover seleção anterior
                        answers.forEach(a => a.classList.remove('selected'));
                        // Selecionar resposta atual
                        this.classList.add('selected');
                    });
                });
            });
        });
    </script>
</body>
</html>
